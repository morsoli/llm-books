æœ¬ç”µå­ä¹¦å¼€æºï¼Œæ¬¢è¿ star ğŸŒŸï¼Œå…³æ³¨ã€ŠLLM åº”ç”¨å¼€å‘å®è·µç¬”è®°ã€‹

æˆ‘çš„æ–°ä¹¦[ã€ŠLangChainç¼–ç¨‹ä»å…¥é—¨åˆ°å®è·µã€‹](https://u.jd.com/V8pkqFY) å·²ç»å¼€å”®ï¼æ¨èæ­£åœ¨å­¦ä¹ AIåº”ç”¨å¼€å‘çš„æœ‹å‹è´­ä¹°é˜…è¯»ï¼
[![LangChainç¼–ç¨‹ä»å…¥é—¨åˆ°å®è·µ](../../images/langchain-book.jpg "LangChainç¼–ç¨‹ä»å…¥é—¨åˆ°å®è·µ")](https://u.jd.com/V8pkqFY) ![](../images/group.png)

## å®ç°ä¸€ä¸ªæ–‡æ¡£é—®ç­”æœºå™¨äºº
å½“å‰è‡ªæœ‰æ•°æ®æ¥å…¥å¤§æ¨¡å‹æœ‰ä¸¤ç§æ–¹å¼ï¼šå¾®è°ƒæ¨¡å‹å’Œåœ¨ Prompt ä¸Šä¸‹æ–‡ä¸­å¸¦å…¥çŸ¥è¯†

- prompt ä¸Šä¸‹æ–‡ä¸­å¸¦å…¥çŸ¥è¯†ï¼Œä¾‹å¦‚[AIæ³•å¾‹åŠ©æ‰‹](https://github.com/lvwzhen/law-cn-ai)
  - ç¼ºç‚¹ï¼šæ•ˆæœè¾ƒå·®ï¼Œéš¾ä»¥åœ¨è¦æ±‚æ¯”è¾ƒé«˜çš„å‚ç›´åœºæ™¯ä½¿ç”¨
  - ä¼˜ç‚¹ï¼šå³å¼€å³ç”¨ï¼Œåº”ç”¨è½åœ°é€Ÿåº¦éå¸¸å¿«
- å¾®è°ƒï¼ˆFine-tuningï¼‰æ³¨å…¥ä¸“ä¸šé¢†åŸŸçŸ¥è¯†ï¼Œä¾‹å¦‚[ä¸­æ–‡æ³•å¾‹é€šç”¨æ¨¡å‹](https://github.com/LiuHC0428/LAW-GPT)ç”±ChatGLM-6B LoRA 16-bitæŒ‡ä»¤å¾®è°ƒå¾—åˆ°
  - ç¼ºç‚¹ï¼šå‡å°‘äº†LLMç¼–æ’çš„é€»è¾‘ï¼Œç›´æ¥è°ƒç”¨å³å¯
  - ä¼˜ç‚¹ï¼šæˆæœ¬å’Œæ—¶é—´èŠ±è´¹éƒ½æ¯”è¾ƒé«˜ï¼Œè€Œä¸”éœ€è¦å®šæœŸè¿›è¡Œè°ƒæ•´ä»¥ä¿æŒæ›´æ–°ï¼ˆæ³•å¾‹æ–‡æœ¬è¿˜å¥½ä¸€äº›ï¼‰

ä¸‹é¢æ˜¯ä¸€ä¸ªæ–‡æ¡£é—®ç­”æœºå™¨äººï¼ˆPrompt ä¸Šä¸‹æ–‡ä¸­å¸¦å…¥çŸ¥è¯†ï¼‰çš„å®ç°é€šç”¨æµç¨‹å›¾

![](https://mermaid.ink/img/pako:eNqlVE1v00AQ_Sur5WJLm4iktyBVStpwIb0AJ2IOrneduLXXJnaaRFGkSrQ0Ra0aVAgSJIVWreiBEsSHBP0Qf6ZeJ_-CtTcJrZIDhT15Zp7fezuj2TrUbExgChZKqlMEufsKdcuLIgjOdtnemr_VZq8-s-1PCgX8pBN5zV1BpKoRE7lPTFS1zMfDUjJfs0y05NqUZwjFV7gG3b2pdJlE3sE6stTSMrYrFGFbqyKv6sXj8SFrJplfcgrIoYUruZm85cygiroicpGWQidFQCwWA_7z9_2LC_-wPXh6PNL-W1xaYu0N1vkoYlmhkyD-7yxI87t6NZNMIQG6YZqpW7qu8YOA65XsZRLGt_kZxbGKgb1iKulU73DRyI4Q9pvP_M0vkUZm6MXvvpZHctdANxbKREJZa5FgbNCC63_f8tePwuQsyNb91ovBxo64hH-62xhpTuBvrKvQOUnq904uf26GI3h31O8dyPJ1M2Mvs2AuIQmMcCRPGPkPHwkx-og4ePvj8vycrX5grU7w7SDqQxaMJzsV8w-aWU4MHtoOuCdWrCMaPi9xbn_9a_Bm7c-ceYXttILDU3a8z7q_OI51VoOzpkj2e9uh-1xuIezTXUkSxeDkJdtvyrxPEEGLlCzVwHzF6-HyKNArEosoMMU_MdHVsukpUKENDlXLnv2gRjWY0lXTJQiWHax6ZN5Q-RJb4yzBhmeXFsS7ET0fCDoqfWTbI0zjN6Pg644?type=png)




### ä¿é™©åˆåŒè§£è¯»æœºå™¨äºº
åœ¨[äººèº«ä¿é™©äº§å“ä¿¡æ¯åº“](https://www.iachina.cn/art/2017/6/29/art_71_45682.html) æŸ¥è¯¢å·²å¤‡æ¡ˆçš„ä¿é™©åˆåŒåŸä»¶ï¼Œä¸ºPDFæ ¼å¼

![pdf-qabot](../images/pdf-qabot.webp)

#### åˆåŒæ–‡æ¡£åˆ†å‰²
æœ€ç®€å•çš„æ–¹æ¡ˆè‡ªç„¶æ˜¯ï¼ŒæŠŠä¿é™©æ¡æ¬¾æŒ‰é¡µç ä¸€é¡µä¸€é¡µåˆ†å—ï¼Œå¦‚æœä¸€é¡µå†…å®¹ä¹Ÿè¶…äº†ï¼Œé‚£æˆ‘ä»¬å°±åŠé¡µåŠé¡µåˆ†å—ã€‚

### æœ€ç»ˆå®ç°

```python
from langchain.chains import RetrievalQA
from langchain.llms import OpenAI
from langchain.document_loaders import PyPDFLoader,PDFMinerLoader,PDFPlumberLoader,PyMuPDFLoader
from langchain.text_splitter import CharacterTextSplitter
from langchain.embeddings import OpenAIEmbeddings
from langchain.vectorstores import Chroma

def qa(file, query, chain_type, k):
    # load document
    loader = PyMuPDFLoader(file)
    documents = loader.load()
    # split the documents into chunks
    text_splitter = CharacterTextSplitter(chunk_size=2000, chunk_overlap=0)
    texts = text_splitter.split_documents(documents)
    # select which embeddings we want to use
    embeddings = OpenAIEmbeddings()
    # create the vectorestore to use as the index
    db = Chroma.from_documents(texts, embeddings)
    # expose this index in a retriever interface
    retriever = db.as_retriever(search_type="similarity", search_kwargs={"k": k})
    # create a chain to answer questions 
    qa = RetrievalQA.from_chain_type(
        llm=OpenAI(), chain_type=chain_type, retriever=retriever, return_source_documents=True)
    result = qa({"query": query})
    print(result['result'])
    return result

def qa_result(prompt_text, select_chain_type, select_k):
    result = qa(file="./test.pdf", query=prompt_text, chain_type=select_chain_type, k=select_k)
    print(result)

if __name__ == "__main__":
    import langchain
    langchain.debug = True
    qa_result("å¯ä»¥ä»”ç»†è®²è®²å…èµ”é¢å—", "map_reduce", 3)
```

### å‚è€ƒé“¾æ¥
1. [æ„å»ºåŸºäºå¤§å‹è¯­è¨€æ¨¡å‹çš„ AI åº”ç”¨](https://medium.com/mlearning-ai/building-large-language-model-powered-ai-applications-96780d67c64a)
2. [Pinecone AI æ‰‹å†Œ](https://www.pinecone.io/learn/langchain-intro/)